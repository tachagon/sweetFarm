<form action="<%= root_path %>" method="get">

  <div class="form-group">
    <label for="role">ประเภท</label>
    <select name="role" id="role" class="form-control">
      <option value="" <%= 'selected' if @role == '' %>></option>
      <option value="purchase" <%= 'selected' if @role == 'purchase' %>>ประกาศซื้อ</option>
      <option value="sale" <%= 'selected' if @role == 'sale' %>>ประกาศขาย</option>
    </select>
  </div>

  <div class="form-group">
    <label for="province">จังหวัด</label>
    <select name="province" id="province" class="form-control"></select>
  </div>

  <div class="form-group">
    <label for="amphur">อำเภอ</label>
    <select name="amphur" id="amphur" class="form-control"></select>
  </div>

  <div class="form-group">
    <label for="district">ตำบล</label>
    <select name="district" id="district" class="form-control"></select>
  </div>

  <button type="submit" class="btn btn-primary btn-block">กรองประกาศ</button>
  <a href="<%= root_path %>" title="" class="btn btn-default btn-block">ยกเลิก</a>
</form>

<script type="text/javascript">

  $(document).ready(function () {
    $("#province").select2();
    $("#amphur").select2();
    $("#district").select2();
    option_province('province');

    var role = "";
    var province_id = "";
    var amphur_id = "";
    var district_id = "";

    $('#province').change(function(){
      province_id = $('#province').val();
      option_amphur('amphur', province_id);
      $('#amphur').val('US');
      $('#amphur').trigger('change');
      $('#district').val('US');
      $('#district').trigger('change');
    });

    $('#amphur').change(function(){
      province_id = $('#province').val();
      amphur_id = $('#amphur').val();
      option_district('district', province_id, amphur_id);
      $('#district').val('US');
      $('#district').trigger('change');
    });

  });
</script>
